@model QuanLyThueXe.Models.Contract

@{
    ViewBag.Title = "Chi tiết hợp đồng";
}

<h2>Chi tiết Hợp đồng #@Model.ContractId</h2>

<div>
    <h4>Khách hàng</h4>
    <p>@Model.Customer.FullName</p>
    <p>@Model.Customer.Phone</p>

    <h4>Xe thuê</h4>
    <p>@Model.Car.Brand - @Model.Car.Model (@Model.Car.LicensePlate)</p>
    <img src="@ImageHelper.GetCarImageUrl(Model.Car)" alt="@Model.Car.Model" style="max-width: 200px;" />

    <h4>Chi tiết hợp đồng</h4>
    <p>Ngày thuê: @DateHelper.FormatDateOnly(Model.StartDate)</p>
    <p>Ngày trả: @DateHelper.FormatDateOnly(Model.EndDate)</p>
    <p>Số ngày thuê: @DateHelper.CalculateDays(Model.StartDate, Model.EndDate) ngày</p>
    <p>Tiền cọc: @PriceHelper.FormatPrice(Model.Deposit)</p>
    <p>Tổng tiền: @PriceHelper.FormatPrice(Model.TotalAmount)</p>
    <p>Số tiền còn lại: @PriceHelper.FormatPrice(PriceHelper.CalculateRemainingAmount(Model.TotalAmount, Model.Deposit))</p>
    <p>Trạng thái: 
        <span class="badge @(Model.Status == "Active" ? "bg-success" : Model.Status == "Completed" ? "bg-secondary" : "bg-warning")">
            @Model.Status
        </span>
    </p>

    <a asp-action="Edit" asp-route-id="@Model.ContractId" class="btn btn-warning">Sửa</a>
    <a asp-action="Index" class="btn btn-secondary">Quay lại</a>
</div>
